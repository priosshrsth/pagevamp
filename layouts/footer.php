
<!-- Start Footer Area -->
<footer class="htc__foooter__area gray-bg">
    <div class="container">
        <div class="row">
            <div class="footer__container clearfix">
                <!-- Start Single Footer Widget -->
                <div class="col-md-3 col-lg-3 col-sm-6">
                    <div class="ft__widget">
                        <div class="ft__logo">
                            <a href="index.html">
                                <img src="images/logo/logo.png" alt="footer logo">
                            </a>
                        </div>
                        <div class="footer-address">
                            <ul>
                                <li>
                                    <div class="address-icon">
                                        <i class="zmdi zmdi-pin"></i>
                                    </div>
                                    <div class="address-text">
                                        <p>194 Main Rd T, FS Rayed <br> VIC 3057, USA</p>
                                    </div>
                                </li>
                                <li>
                                    <div class="address-icon">
                                        <i class="zmdi zmdi-email"></i>
                                    </div>
                                    <div class="address-text">
                                        <a href="#"> info@example.com</a>
                                    </div>
                                </li>
                                <li>
                                    <div class="address-icon">
                                        <i class="zmdi zmdi-phone-in-talk"></i>
                                    </div>
                                    <div class="address-text">
                                        <p>+012 345 678 102 </p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <ul class="social__icon">
                            <li><a href="#"><i class="zmdi zmdi-twitter"></i></a></li>
                            <li><a href="#"><i class="zmdi zmdi-instagram"></i></a></li>
                            <li><a href="#"><i class="zmdi zmdi-facebook"></i></a></li>
                            <li><a href="#"><i class="zmdi zmdi-google-plus"></i></a></li>
                        </ul>
                    </div>
                </div>
                <!-- End Single Footer Widget -->
                <!-- Start Single Footer Widget -->
                <div class="col-md-3 col-lg-2 col-sm-6 smt-30 xmt-30">
                    <div class="ft__widget">
                        <h2 class="ft__title">Categories</h2>
                        <ul class="footer-categories">
                            <li><a href="shop-sidebar.html">Men</a></li>
                            <li><a href="shop-sidebar.html">Women</a></li>
                            <li><a href="shop-sidebar.html">Accessories</a></li>
                            <li><a href="shop-sidebar.html">Shoes</a></li>
                            <li><a href="shop-sidebar.html">Dress</a></li>
                            <li><a href="shop-sidebar.html">Denim</a></li>
                        </ul>
                    </div>
                </div>
                <!-- Start Single Footer Widget -->
                <div class="col-md-3 col-lg-2 col-sm-6 smt-30 xmt-30">
                    <div class="ft__widget">
                        <h2 class="ft__title">Infomation</h2>
                        <ul class="footer-categories">
                            <li><a href="about.html">About Us</a></li>
                            <li><a href="contact.html">Contact Us</a></li>
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Returns & Exchanges</a></li>
                            <li><a href="#">Shipping & Delivery</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul>
                    </div>
                </div>
                <!-- Start Single Footer Widget -->
                <div class="col-md-3 col-lg-3 col-lg-offset-1 col-sm-6 smt-30 xmt-30">
                    <div class="ft__widget">
                        <h2 class="ft__title">Newsletter</h2>
                        <div class="newsletter__form">
                            <p>Subscribe to our newsletter and get 10% off your first purchase .</p>
                            <div class="input__box">
                                <div id="mc_embed_signup">
                                    <form action="#" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                                        <div id="mc_embed_signup_scroll" class="htc__news__inner">
                                            <div class="news__input">
                                                <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email Address" required>
                                            </div>
                                            <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_6bbb9b6f5827bd842d9640c82_05d85f18ef" tabindex="-1" value=""></div>
                                            <div class="clearfix subscribe__btn"><input type="submit" value="Send" name="subscribe" id="mc-embedded-subscribe" class="bst__btn btn--white__color">

                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Single Footer Widget -->
            </div>
        </div>
        <!-- Start Copyright Area -->
        <div class="htc__copyright__area">
            <div class="row">
                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                    <div class="copyright__inner">
                        <div class="copyright">
                            <p>Â© 2017 <a href="https://freethemescloud.com/">Free themes Cloud</a>
                                All Right Reserved.</p>
                        </div>
                        <ul class="footer__menu">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="shop.html">Product</a></li>
                            <li><a href="contact.html">Contact Us</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Copyright Area -->
    </div>
</footer>
<!-- End Footer Area -->
</div>
<!-- Body main wrapper end -->
<!-- QUICKVIEW PRODUCT -->
<div id="quickview-wrapper">
    <!-- Modal -->
    <div class="modal fade" id="productModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal__container" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="modal-product">
                        <!-- Start product images -->
                        <div class="product-images">
                            <div class="main-image images">
                                <img alt="big images" src="images/product/big-img/1.jpg">
                            </div>
                        </div>
                        <!-- end product images -->
                        <div class="product-info">
                            <h1>Simple Fabric Bags</h1>
                            <div class="rating__and__review">
                                <ul class="rating">
                                    <li><span class="ti-star"></span></li>
                                    <li><span class="ti-star"></span></li>
                                    <li><span class="ti-star"></span></li>
                                    <li><span class="ti-star"></span></li>
                                    <li><span class="ti-star"></span></li>
                                </ul>
                                <div class="review">
                                    <a href="#">4 customer reviews</a>
                                </div>
                            </div>
                            <div class="price-box-3">
                                <div class="s-price-box">
                                    <span class="new-price">$17.20</span>
                                    <span class="old-price">$45.00</span>
                                </div>
                            </div>
                            <div class="quick-desc">
                                Designed for simplicity and made from high quality materials. Its sleek geometry and material combinations creates a modern look.
                            </div>
                            <div class="select__color">
                                <h2>Select color</h2>
                                <ul class="color__list">
                                    <li class="red"><a title="Red" href="#">Red</a></li>
                                    <li class="gold"><a title="Gold" href="#">Gold</a></li>
                                    <li class="orange"><a title="Orange" href="#">Orange</a></li>
                                    <li class="orange"><a title="Orange" href="#">Orange</a></li>
                                </ul>
                            </div>
                            <div class="select__size">
                                <h2>Select size</h2>
                                <ul class="color__list">
                                    <li class="l__size"><a title="L" href="#">L</a></li>
                                    <li class="m__size"><a title="M" href="#">M</a></li>
                                    <li class="s__size"><a title="S" href="#">S</a></li>
                                    <li class="xl__size"><a title="XL" href="#">XL</a></li>
                                    <li class="xxl__size"><a title="XXL" href="#">XXL</a></li>
                                </ul>
                            </div>
                            <div class="social-sharing">
                                <div class="widget widget_socialsharing_widget">
                                    <h3 class="widget-title-modal">Share this product</h3>
                                    <ul class="social-icons">
                                        <li><a target="_blank" title="rss" href="#" class="rss social-icon"><i class="zmdi zmdi-rss"></i></a></li>
                                        <li><a target="_blank" title="Linkedin" href="#" class="linkedin social-icon"><i class="zmdi zmdi-linkedin"></i></a></li>
                                        <li><a target="_blank" title="Pinterest" href="#" class="pinterest social-icon"><i class="zmdi zmdi-pinterest"></i></a></li>
                                        <li><a target="_blank" title="Tumblr" href="#" class="tumblr social-icon"><i class="zmdi zmdi-tumblr"></i></a></li>
                                        <li><a target="_blank" title="Pinterest" href="#" class="pinterest social-icon"><i class="zmdi zmdi-pinterest"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="addtocart-btn">
                                <a class="add_to_cart" product="" href="javascript:void(0)">Add to cart</a>
                            </div>
                        </div><!-- .product-info -->
                    </div><!-- .modal-product -->
                </div><!-- .modal-body -->
            </div><!-- .modal-content -->
        </div><!-- .modal-dialog -->
    </div>
    <!-- END Modal -->
</div>
<!-- END QUICKVIEW PRODUCT -->
<!-- Placed js at the end of the document so the pages load faster -->

<!-- jquery latest version -->
<script src="js/vendor/jquery-1.12.0.min.js"></script>
<!-- Bootstrap framework js -->
<script src="js/bootstrap.min.js"></script>
<!-- All js plugins included in this file. -->
<script src="js/plugins.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<!-- Waypoints.min.js. -->
<script src="js/waypoints.min.js"></script>
<!-- Main js file that contents all jQuery plugins activation. -->
<script src="js/main.js"></script>
<script src="js/vendor/validator.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<?php
if(isset($_JS)) {
    foreach($JS as $js) {
        $css = explode(',');
        if(end($js)==='cdn') {
            echo "<script src='$js'></script>";
        } else {
            echo "<script src='js/$js'></script>";
        }
    }
}
?>

<script>
    toastr.options = {
        "closeButton": true,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "positionClass": "toast-top-right",
        "preventDuplicates": false,
        "onclick": null,
        "showDuration": "300",
        "hideDuration": "1000",
        "timeOut": 4000,
        "extendedTimeOut": 3000,
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "fadeIn",
        "hideMethod": "fadeOut"
    };
    <?php
    if(isset($success) && sizeof($success) > 0) {
        foreach ($success as $msg) {
            echo "toastr.success('$msg', 'Yay!! Successfull!!!!')";
        }
    }
    if(isset($exceptions) && sizeof($exceptions) > 0) {
        foreach ($exceptions as $msg) {
            echo "toastr.error('$msg', 'Ooops! Error!!!!',{timeOut: 3000})";
        }
    }
    if(isset($warnings) && sizeof($warnings) > 0) {
        foreach ($warnings as $msg) {
            echo "toastr.warning('$msg', 'Be Careful!!', {timeOut: 8000})";
        }
    }
    ?>

    $('.product-tab-list li a').click(function (e) {
       // e.preventDefault();
        $(this).tab('show');
    });

    $('#productModal').on('show.bs.modal', function (e) {
        var invoker = $(e.relatedTarget);
        var product = JSON.parse(invoker.attr('data'));
        $('img', $(this)).attr('src', 'images/products/'+product.image);
        $('.add_to_cart', $(this)).attr('product', product.id);
        $('.product-info>h1:first-child',$(this)).text(product.name);
        var price = parseFloat(product.price) + 500;
        $('.old-price', $(this)).text('$'+price);
        $('.new-price', $(this)).text('$'+product.price);
    });

    $(document).ready(function () {
        $("#productModal .add_to_cart").click(function(e) {
            e.preventDefault();
            var id = $(this).attr('product');
            if(id != undefined) {
                app.addToCart($(this).attr('product'));
            }
        });

    });
    var app = new Vue({
        el: '#app',
        data: {
            cart: [],
            header: {
                "Content-Type": "application/json",
                "Accept": "application/json",
                "X-Requested-With": "XMLHttpRequest",
            },
        },
        computed: {
            totalPrice() {
                var total = 0;
                this.cart.filter((item) => {
                    total+=parseFloat(item.price)*parseFloat(item.quantity);
                });
                return total;
            }
        },
        created() {
            var self = this;
            fetch('api.php?api=true&filter=session', {
                headers: self.header,
                method: "post",
                credentials: "same-origin",
                'X-CSRF-Token': "<?php csrf_token(); ?>",
            })
            .then((resp) => resp.json()) // Call the fetch function passing the url of the API as a parameter
            .then(function(data) {
                if(data.length > 0)
                self.cart = data;
                // Your code for handling the data you get from the API
            })
            .catch(function(error) {
                console.log(error);
                // This is where you run code if the server returns any errors
            });
        },
        methods: {
            addToCart(productID) {
                var self = this;
                //var body = {
                //    'id': productID,
                //    'add_to_cart': 'Submit',
                //    '_token': "//",
                //};
                fetch('api.php?api=true&add_to_cart=true&id='+productID, {
                    method: "get",
                    headers: self.header,
                    credentials: "same-origin",
                })
                    .then((resp) => resp.json()) // Call the fetch function passing the url of the API as a parameter
                    .then(function(data) {
                        try {
                            if(data.success) {
                                if(data.new) {
                                    self.cart.push(data.product);
                                } else {
                                    let obj = self.cart.find(x => x.id == productID);
                                    let index = self.cart.indexOf(obj);
                                    self.cart[index].quantity = self.cart[index].quantity + 1;
                                }
                                toastr.success(data.msg, 'Added to cart!!');
                            } else {
                                toastr.error(data.msg, 'Ooops! Error!!!!');
                            }
                        } catch (e) {
                            console.log(data);
                            toastr.warning('Unable to resolve response!', 'Ooops! Error!!!!');
                        }
                        // Your code for handling the data you get from the API
                    })
                    .catch(function(error) {
                        console.log(error);
                        // This is where you run code if the server returns any errors
                    });
            },
            removeFromCart(index) {
                var self = this;
                fetch('api.php?api=true&remove_from_cart=true&index='+index, {
                    method: "get",
                    headers: self.header,
                    credentials: "same-origin",
                })
                    .then((resp) => resp.json()) // Call the fetch function passing the url of the API as a parameter
                    .then(function(data) {
                        try {
                            if(data.success) {
                                self.cart.splice(index,1);
                                toastr.success("Successfully Removed From CArt", 'Removed!!');
                            } else {
                                toastr.error("Unable To Remove!", 'Ooops! Error!!!!');
                            }
                        } catch (e) {
                            console.log(data);
                            toastr.warning('Unable to resolve response!', 'Ooops! Error!!!!');
                        }
                        // Your code for handling the data you get from the API
                    })
                    .catch(function(error) {
                        console.log(error);
                        // This is where you run code if the server returns any errors
                    });
            },
            getPrice(index) {
                console.log(index);
                var cart = this.cart;
                return parseFloat(cart[index].price) * parseFloat(cart[index].quantity);
            }
        }
    })

    function text($el) {
        var words = $el.val().match(/\S+/g).length;
        var min = $el.attr('min');
        if(typeof(min) == "undefined") {
            min = 0;
        }
        var max = $el.attr('max');
        if(typeof(max) == "undefined") {
            max = 4000;
        }
        if(words<min) {
            return "It needs to be more than "+min+" characters!";
        }
        if(words>max) {
            return "It needs to be less than "+max+" characters!";
        }
    }

</script>

</body>

</html>